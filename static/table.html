<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>资产列表检索 - 资产管理系统</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="stylesheet" href="/static/table-styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>资产列表检索</h1>
            <p>表格形式查看和检索资产数据 - 支持按列排序</p>
            <div class="nav-buttons">
                <a href="/" class="btn btn-secondary">返回主页</a>
                <a href="/dashboard" class="btn btn-secondary">数据统计</a>
                <a href="/docs" class="btn btn-secondary" target="_blank">API文档</a>
            </div>
        </header>

        <main>
            <!-- 搜索和筛选区域 -->
            <section class="search-section">
                <h2>搜索和筛选</h2>
                <div class="search-controls">
                    <div class="search-group">
                        <label for="searchInput">搜索关键词:</label>
                        <input type="text" id="searchInput" placeholder="搜索资产名称、类别或描述...">
                    </div>
                    
                    <div class="filter-group">
                        <label for="categoryFilter">资产类别:</label>
                        <select id="categoryFilter">
                            <option value="">所有类别</option>
                            <option value="电子设备">电子设备</option>
                            <option value="办公用品">办公用品</option>
                            <option value="车辆">车辆</option>
                            <option value="房产">房产</option>
                            <option value="家具">家具</option>
                            <option value="其他">其他</option>
                        </select>
                    </div>
                    
                    <div class="value-filter-group">
                        <label for="minValue">最小价值:</label>
                        <input type="number" id="minValue" placeholder="0" min="0" step="0.01">
                        
                        <label for="maxValue">最大价值:</label>
                        <input type="number" id="maxValue" placeholder="无限制" min="0" step="0.01">
                    </div>
                    
                    <div class="date-filter-group">
                        <label for="startDate">开始日期:</label>
                        <input type="date" id="startDate">
                        
                        <label for="endDate">结束日期:</label>
                        <input type="date" id="endDate">
                    </div>
                </div>
                
                <div class="search-actions">
                    <button id="applyFilters" class="btn btn-primary">应用筛选</button>
                    <button id="clearFilters" class="btn btn-secondary">清除筛选</button>
                    <button id="refreshTable" class="btn btn-secondary">刷新数据</button>
                    <button id="exportData" class="btn btn-secondary">导出CSV</button>
                </div>
            </section>

            <!-- 表格区域 -->
            <section class="table-section">
                <div class="table-header">
                    <h2>资产数据表格</h2>
                    <div class="table-info">
                        <span id="tableInfo">显示 0 条记录</span>
                        <div class="view-options">
                            <label for="pageSize">每页显示:</label>
                            <select id="pageSize">
                                <option value="10">10条</option>
                                <option value="25" selected>25条</option>
                                <option value="50">50条</option>
                                <option value="100">100条</option>
                                <option value="all">全部</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div id="loading" class="loading" style="display: none;">加载中...</div>
                <div id="error" class="error" style="display: none;"></div>

                <div class="table-container">
                    <table id="assetsTable" class="assets-table">
                        <thead>
                            <tr>
                                <th data-column="id" data-type="number" class="sortable">
                                    ID <span class="sort-indicator"></span>
                                </th>
                                <th data-column="name" data-type="string" class="sortable">
                                    资产名称 <span class="sort-indicator"></span>
                                </th>
                                <th data-column="category" data-type="string" class="sortable">
                                    类别 <span class="sort-indicator"></span>
                                </th>
                                <th data-column="value" data-type="number" class="sortable">
                                    价值 (¥) <span class="sort-indicator"></span>
                                </th>
                                <th data-column="purchase_date" data-type="date" class="sortable">
                                    购买日期 <span class="sort-indicator"></span>
                                </th>
                                <th data-column="description" data-type="string" class="sortable">
                                    描述 <span class="sort-indicator"></span>
                                </th>
                                <th class="actions-column">操作</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            <!-- 数据行将在这里动态生成 -->
                        </tbody>
                    </table>
                </div>

                <div id="emptyTable" class="empty-state" style="display: none;">
                    <p>没有找到符合条件的资产数据</p>
                    <p>请调整搜索条件或 <a href="/">添加新资产</a></p>
                </div>

                <!-- 分页控件 -->
                <div id="pagination" class="pagination" style="display: none;">
                    <button id="prevPage" class="btn btn-secondary">上一页</button>
                    <span id="pageInfo" class="page-info">第 1 页，共 1 页</span>
                    <button id="nextPage" class="btn btn-secondary">下一页</button>
                </div>
            </section>

            <!-- 统计信息 -->
            <section class="stats-section">
                <h2>统计信息</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">总资产数量</div>
                        <div id="totalCount" class="stat-value">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">总资产价值</div>
                        <div id="totalValue" class="stat-value">¥0.00</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">平均价值</div>
                        <div id="averageValue" class="stat-value">¥0.00</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">最高价值</div>
                        <div id="maxValue" class="stat-value">¥0.00</div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- 编辑资产模态框 -->
    <div id="editModal" class="modal" style="display: none;">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3>编辑资产</h3>
                <button id="closeEdit" class="close-btn">&times;</button>
            </div>
            <form id="editForm" class="edit-form">
                <input type="hidden" id="editAssetId">
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="editName">资产名称:</label>
                        <input type="text" id="editName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="editCategory">资产类别:</label>
                        <select id="editCategory" required>
                            <option value="电子设备">电子设备</option>
                            <option value="办公用品">办公用品</option>
                            <option value="车辆">车辆</option>
                            <option value="房产">房产</option>
                            <option value="家具">家具</option>
                            <option value="其他">其他</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="editValue">资产价值 (¥):</label>
                        <input type="number" id="editValue" step="0.01" min="0" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="editPurchaseDate">购买日期:</label>
                        <input type="date" id="editPurchaseDate" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="editDescription">描述:</label>
                    <textarea id="editDescription" rows="3"></textarea>
                </div>
                
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">保存更改</button>
                    <button type="button" id="cancelEdit" class="btn btn-secondary">取消</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 删除确认模态框 -->
    <div id="deleteModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>确认删除</h3>
            <p id="deleteMessage">您确定要删除这个资产吗？此操作无法撤销。</p>
            <div class="modal-actions">
                <button id="confirmDelete" class="btn btn-danger">确认删除</button>
                <button id="cancelDelete" class="btn btn-secondary">取消</button>
            </div>
        </div>
    </div>

    <script src="/static/table-script.js"></script>
</body>
</html>